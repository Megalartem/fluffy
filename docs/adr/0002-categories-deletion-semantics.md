# ADR-0002: Семантика удаления категорий и влияние на транзакции

- **Статус:** Accepted
- **Дата:** 2026-02-16
- **Контекст:** домены `categories`, `transactions`

## Контекст

Удаление категории не должно приводить к потере транзакций и ломать историческую аналитику.

## Решение

- Категория удаляется через `softDelete`.
- После этого выполняется cleanup транзакций: `unsetCategory(workspaceId, categoryId)`.
- Транзакции сохраняются, но их `categoryId` становится `null`.

## Обоснование

- Исторические финансовые события важнее, чем сохранение справочника категорий.
- Такой подход безопаснее для UX и аналитики, чем каскадное удаление транзакций.

## Последствия

### Плюсы
- Нет потери транзакционных данных.
- Простая и предсказуемая модель удаления.

### Минусы
- Появляются транзакции без категории (нужна корректная обработка в UI/фильтрах/отчётах).

## Связанные доменные правила

- Category — mutable справочник.
- Transaction — immutable-ish факт финансового события (с мягкими корректировками полей).
